<!doctype html>
<html lang="de" class="has-navbar-fixed-top">

<head>
  <meta charset="utf-8">
  <title>hundert11 SV- und Steuer-Rechner Demo</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
  <style>
    .w-100 {width: 100%;}
    .rounded {border-radius: 50%;}
    .same-width-numbers {font-feature-settings: "tnum";font-variant-numeric: tabular-nums;}
  </style>
  <script type="module" src="../index.js"></script>
  <script src="//unpkg.com/alpinejs" defer></script>
</head>

<body>
  <nav class="navbar is-fixed-top has-text-centered">
    <div class="column">
      <h1 class="title">
        1Ô∏è‚É£1Ô∏è‚É£1Ô∏è‚É£ hundertelf
      </h1>
      <p class="subtitle">
        SV- und Steuer-Rechner
      </p>
    </div>
    <div class="column is-hidden-touch">
      <h1 class="title">
        WKO
      </h1>
      <p class="subtitle">
        SV- und Steuer-Rechner
      </p>
    </div>
  </nav>
  <div class="columns">
    <div class="column">
      <section class="section"
                x-data="{
                  currentYear: (new Date()).getFullYear(),
                  options: {
                    year: (new Date()).getFullYear(),
                    foundingYear: (new Date()).getFullYear(),
                    foundingMonth: 1,
                    paidSv: 0
                  },
                  income: 0, outgo: 0,
                  showYear: false,
                  results: {}
                }"
                x-init="results = hundert11.calculate(income, outgo, options);
                        $watch('income', _ => results = hundert11.calculate(income, outgo, options));
                        $watch('outgo', _ => results = hundert11.calculate(income, outgo, options));
                        $watch('options.year', _ => results = hundert11.calculate(income, outgo, options));
                        $watch('options.foundingYear', _ => results = hundert11.calculate(income, outgo, options));
                        $watch('options.foundingMonth', _ => results = hundert11.calculate(income, outgo, options));
                        $watch('options.paidSv', _ => results = hundert11.calculate(income, outgo, options));">

        <p>Speziell f√ºr EinzelunternehmerInnen, die digitale Dienstleistungen anbieten, d.h. keine Betriebsausgaben f√ºr Personal oder Waren haben.</p>

        <p x-show="!showYear">
          Berechnet wird mit den Werten von <span x-text="options.year"></span>.
          <a @click="showYear = true">Nachrechnen f√ºr verganges Jahr?</a>
        </p>

        <div x-show="showYear" class="field mt-4">
          <label class="label">Berechnung f√ºr das Jahr</label>
          <div class="control">
            <div class="select">
              <select x-model.number="options.year">
                <template
                  x-for="y in [currentYear, currentYear-1, currentYear-2, currentYear-3, currentYear-4, currentYear-5]">
                  <option :key="y" :value="y" x-text="y"></option>
                </template>
              </select>
            </div>
          </div>
        </div>

        <form class="mt-4">
          <div class="columns">
            <div class="column field">
              <label class="label" for="income">
                <span x-show="currentYear == options.year">Voraussichtliche</span> Einnahmen
              </label>
              <div class="control has-icons-left">
                <input class="input" x-model.number="income" id="income" type="number" placeholder="30000" min="0" step="500">
                <span class="icon is-small is-left">
                  ‚Ç¨
                </span>
              </div>
              <p class="help"><input class="w-100" type="range" x-model.number="income" min="0" max="90000" step="500" tabindex="-1"></p>
            </div>
            <div class="column field">
              <label class="label" for="outgo">
                <span x-show="currentYear == options.year">Voraussichtliche</span> Ausgaben
              </label>
              <div class="control has-icons-left">
                <input class="input" x-model.number="outgo" id="outgo" type="number" placeholder="2000" min="0" step="100">
                <span class="icon is-small is-left">
                  ‚Ç¨
                </span>
              </div>
              <p class="help"><input class="w-100" type="range" x-model.number="outgo" min="0" :max="20000" step="500" tabindex="-1"></p>
            </div>
          </div>
          <div class="columns">
            <div class="column is-half field">
              <label class="label" for="sv">Gezahlte Sozialversicherungsbeitr√§ge</label>
              <div class="control has-icons-left">
                <input class="input" x-model.number="options.paidSv" id="sv" type="number" placeholder="2000" min="0" step="500">
                <span class="icon is-small is-left">
                  ‚Ç¨
                </span>
              </div>
            </div>
            <div class="column field">
              <label class="label" for="year">Gr√ºndungsjahr</label>
              <div class="control">
                <input class="input" x-model.number="options.foundingYear" id="year" type="number" min="2000" :max="options.year">
              </div>
            </div>
            <div class="column field" :class="options.foundingYear === options.year ? '' : 'is-invisible'">
              <label class="label" for="month">Gr√ºndungsmonat</label>
              <div class="control">
                <input class="input" x-model.number="options.foundingMonth" id="month" type="number" min="1" max="12">
              </div>
            </div>
          </div>
        </form>

        <div class="columns mt-5">
          <div class="column">
            <div class="box is-flex is-align-items-center is-justify-content-space-between is-size-4"
                 :class="{ 'has-text-grey-lighter': !income }">
              <div>
                <h5 class="is-size-7 has-text-grey is-uppercase mr-2">
                  Nettoeinkommen
                </h5>
                <span class="same-width-numbers" x-text="results.netto.toLocaleString()"></span> ‚Ç¨
              </div>
              <i class="fas fa-chart-line rounded has-background-success has-text-white p-4 is-size-5"></i>
            </div>
          </div>
          <div class="column">
            <div class="box is-flex is-align-items-center is-justify-content-space-between is-size-4"
                  :class="{ 'has-text-grey-lighter': !income }">
              <div>
                <h5 class="is-size-7 has-text-grey is-uppercase mr-2">
                  Einkommensteuer
                </h5>
                <span class="same-width-numbers" x-text="results.est.toLocaleString()"></span> ‚Ç¨
              </div>
              <i class="fas fa-landmark rounded has-background-grey-dark has-text-white p-4 is-size-5"></i>
            </div>
          </div>
          <div class="column">
            <div class="box is-flex is-align-items-center is-justify-content-space-between is-size-4"
                  :class="{ 'has-text-grey-lighter': !income }">
              <div>
                <h5 class="is-size-7 has-text-grey is-uppercase mr-2">
                  Sozialversicherung
                </h5>
                <span class="same-width-numbers" x-text="results.sv.toLocaleString()"></span>‚Ç¨
                <span x-show="results.svAdditional" class="has-text-danger is-size-7">
                  +<span x-text="results.svAdditional.toLocaleString()"></span>‚Ç¨
                </span>
              </div>
              <i class="fas fa-heartbeat rounded has-background-warning-dark has-text-white p-4 is-size-5"></i>
            </div>
          </div>
        </div>

        <template x-for="tipp in results.tipps" :key="tipp">
          <article class="message is-success">
            <div class="message-body">
              üí° &nbsp;<span x-text="{USE_PAUSCHALIERUNG: 'Verwende die Basispauschalierung', EXCLUDE_KV_PV: 'Befreie dich von Kranken- und Pensionsversicherung', INCREASE_SV: 'Erh√∂he deine SV-Beitr√§ge'}[tipp]"></span>
            </div>
          </article>
        </template>

      </section>

      <section class="section">
        <article class="message is-dark">
          <div class="message-header">
            <p>Wie wird gerechnet?</p>
          </div>
          <div class="message-body content">
            <p>
              <b>Nettoeinkommen =</b><br>&nbsp;&nbsp;
              Einnahmen - Ausgaben - Einkommensteuer - Sozialversicherung
            </p>
            <p>
              <b>Einkommensteuer =</b><br>&nbsp;&nbsp;
              Einkommen lt. ESt-Bescheid x <a
                href="https://www.usp.gv.at/steuern-finanzen/einkommensteuer/tarifstufen-berechnungsformeln.html"
                target="_blank"><i>deine Tarifstufe</i></a>
            </p>
            <p>
              <b>Einkommen lt. ESt-Bescheid =</b><br>&nbsp;&nbsp;
              Einnahmen - Ausgaben <small>(od. Pauschale)</small> - bezahlte SV-Beitr√§ge - 13% Grundfreibetrag
            </p>
            <p>
              <b>Sozialversicherung =</b><br>&nbsp;&nbsp;
              Beitragsgrundlage x Beitragssatz
            </p>
            <p>
              <b>Beitragsgrundlage SV =</b><br>&nbsp;&nbsp;
              Einkommen lt. ESt-Bescheid + bezahlte SV-Beitr√§ge (Vorrauszahlungen)
            </p>
          </div>
        </article>
      </section>

      <section class="section is-hidden-desktop">
        <a href="https://svrechner.wko.at/">Zum WKO SV- und Steuer-Rechner</a>
      </section>
    </div>
    <div class="column is-hidden-touch">
      <iframe src="https://svrechner.wko.at/" width="100%" height="1500" style="margin-top: -10%;" onload="setTimeout(() => document.getElementById('income').focus())"></iframe>
    </div>
  </div>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

</body>

</html>